-- üåà AutoFishing GUI (with Rarity Detector & Safe AutoSell) - All default ON + Anti AFK
-- ‚ö†Ô∏è Place this LocalScript inside StarterGui

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

-- üêü Load area data (FishingAreas)
local FishingAreas = require(ReplicatedStorage:WaitForChild("Items", 5) or ReplicatedStorage:WaitForChild("FishingAreas", 5))

-- üé£ Rare fish list (customize freely)
local RareFishes = {
	"Lochness Monster", "Robot Kraken", "King Jelly", "Orca",
	"Viperangler Fish", "Mosasaur Shark", "Ancient Arapaima",
	"Sacred Guardian Squid", "Bone Whale"
}

-- üé£ Load remotes safely
local function getRemote(path)
	local node = ReplicatedStorage
	for seg in string.gmatch(path, "[^/]+") do
		node = node:FindFirstChild(seg)
		if not node then
			warn("Missing:", path)
			return nil
		end
	end
	return node
end

local baseNet = getRemote("Packages/_Index/sleitnick_net@0.2.0/net")
local RF_Charge = baseNet and baseNet:FindFirstChild("RF/ChargeFishingRod")
local RF_Start = baseNet and baseNet:FindFirstChild("RF/RequestFishingMinigameStarted")
local RE_Complete = baseNet and baseNet:FindFirstChild("RE/FishingCompleted")
local RF_Radar = baseNet and baseNet:FindFirstChild("RF/UpdateFishingRadar")
local RF_SellAll = baseNet and baseNet:FindFirstChild("RF/SellAllItems")
local RE_Equip = baseNet and baseNet:FindFirstChild("RE/EquipToolFromHotbar")

-- üß± GUI SETUP
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AutoSystemUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 320, 0, 260)
frame.Position = UDim2.new(0.02, 0, 0.65, 0)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = frame

local uiStroke = Instance.new("UIStroke")
uiStroke.Thickness = 2
uiStroke.Color = Color3.fromRGB(255, 200, 100)
uiStroke.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -40, 0, 30)
title.Position = UDim2.new(0, 10, 0, 5)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.Text = "üé£ Auto System"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = frame

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 28, 0, 28)
closeBtn.Position = UDim2.new(1, -32, 0, 2)
closeBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
closeBtn.TextSize = 20
closeBtn.Text = "X"
closeBtn.BorderSizePixel = 0
closeBtn.Parent = frame
closeBtn.MouseButton1Click:Connect(function()
	screenGui:Destroy()
end)

-- MINIMIZE BUTTON
local minBtn = Instance.new("TextButton")
minBtn.Size = UDim2.new(0, 28, 0, 28)
minBtn.Position = UDim2.new(1, -65, 0, 2)
minBtn.BackgroundColor3 = Color3.fromRGB(80, 160, 255)
minBtn.Font = Enum.Font.GothamBold
minBtn.TextColor3 = Color3.fromRGB(255,255,255)
minBtn.TextSize = 20
minBtn.Text = "-"
minBtn.BorderSizePixel = 0
minBtn.Parent = frame

local isMinimized = false
local savedSize = frame.Size
local keepVisible = {minBtn, closeBtn}

local function setVisibleAll(state)
	for _, obj in ipairs(frame:GetChildren()) do
		if not table.find(keepVisible, obj) and obj:IsA("GuiObject") then
			obj.Visible = state
		end
	end
end

minBtn.MouseButton1Click:Connect(function()
	if not isMinimized then
		isMinimized = true
		savedSize = frame.Size
		frame.Size = UDim2.new(0, 80, 0, 40)
		minBtn.Text = "üéâ"
		setVisibleAll(false)
	else
		isMinimized = false
		frame.Size = savedSize
		minBtn.Text = "-"
		setVisibleAll(true)
	end
end)

local function makeButton(text, color, position)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0.9, 0, 0, 40)
	btn.Position = position
	btn.BackgroundColor3 = color
	btn.TextColor3 = Color3.fromRGB(255,255,255)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 18
	btn.Text = text
	btn.BorderSizePixel = 0
	btn.Parent = frame

	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 8)
	corner.Parent = btn
	return btn
end

local autoFishBtn = makeButton("üé£ Auto Fishing: ON", Color3.fromRGB(70,180,80), UDim2.new(0.05, 0, 0, 50))
local radarBtn = makeButton("üì° Radar: ON", Color3.fromRGB(70,180,255), UDim2.new(0.05, 0, 0, 100))
local sellBtn = makeButton("üí∞ Auto Sell: ON", Color3.fromRGB(250,220,100), UDim2.new(0.05, 0, 0, 150))
local rarityBtn = makeButton("üåà Rarity Detector: ON", Color3.fromRGB(150,80,255), UDim2.new(0.05, 0, 0, 200))

local status = Instance.new("TextLabel")
status.Size = UDim2.new(1, -20, 0, 25)
status.Position = UDim2.new(0, 10, 1, -30)
status.BackgroundTransparency = 1
status.Text = "Status: Preparing fishing..."
status.TextColor3 = Color3.fromRGB(255,255,255)
status.TextSize = 16
status.Font = Enum.Font.Gotham
status.TextXAlignment = Enum.TextXAlignment.Left
status.Parent = frame

local autoFish = true
local radar = true
local autoSell = true
local rarityDetect = true
local busy = false

-- üîπ Prepare Fishing
local function prepareFishing()
	local char = player.Character or player.CharacterAdded:Wait()
	if char:FindFirstChild("HumanoidRootPart") then
		char.HumanoidRootPart.CFrame = CFrame.new(-3690.525390625, -135.0744171142578, -893.020751953125)
		status.Text = "Status: Teleported to fishing spot..."
		task.wait(5)
	end
	if RE_Equip then
		RE_Equip:FireServer(1)
		status.Text = "Status: Fishing rod equipped..."
		task.wait(5)
	end
	status.Text = "Status: Ready to auto fish!"
end

-- üåä Auto Fishing
local function doFish()
	if busy or not autoFish then return end
	busy = true
	status.Text = "Status: Casting..."
	task.wait(0.5)

	if not RF_Charge or not RF_Start or not RE_Complete then
		warn("Fishing remotes missing!")
		busy = false
		return
	end

	RF_Charge:InvokeServer(tick())
	task.wait(0.5)
	RF_Start:InvokeServer(math.random(-2,2), math.random(-2,2))
	task.wait(3 + math.random())
	RE_Complete:FireServer()
	status.Text = "Status: Fish caught!"
	task.wait(0.8)
	busy = false
end

-- üíé Rarity Detector
local function checkRarity()
	if not rarityDetect then return end
	status.Text = "Status: Scanning rare fish..."
	for areaName, data in pairs(FishingAreas) do
		for _, fish in ipairs(data.Items) do
			if table.find(RareFishes, fish) then
				print("üåà Rare fish found in ["..areaName.."]: "..fish)
			end
		end
	end
	status.Text = "Status: Rarity scan done!"
end

-- üí∏ Auto Sell (skip SECRET & MYTHIC)
local SellTiers = {"COMMON","UNCOMMON","RARE","EPIC"}
local SkipTiers = {"SECRET","MYTHIC"}

task.spawn(function()
	while task.wait(60) do
		if autoSell and RF_SellAll then
			local inv = player:FindFirstChild("Backpack") or player:FindFirstChild("Inventory")
			if inv then
				for _, item in pairs(inv:GetChildren()) do
					local tier = item:FindFirstChild("Tier")
					if tier and table.find(SellTiers, tier.Value) and not table.find(SkipTiers, tier.Value) then
						pcall(function() RF_SellAll:InvokeServer(item) end)
					end
				end
				status.Text = "Status: Sold all non-SECRET/MYTHIC items!"
			end
		end
	end
end)

-- BUTTONS
autoFishBtn.MouseButton1Click:Connect(function()
	autoFish = not autoFish
	autoFishBtn.Text = autoFish and "üé£ Auto Fishing: ON" or "üé£ Auto Fishing: OFF"
	autoFishBtn.BackgroundColor3 = autoFish and Color3.fromRGB(70,180,80) or Color3.fromRGB(180,50,50)
	status.Text = autoFish and "Status: Preparing fishing..." or "Status: Idle"
	if autoFish then task.spawn(prepareFishing) end
end)

radarBtn.MouseButton1Click:Connect(function()
	radar = not radar
	radarBtn.Text = radar and "üì° Radar: ON" or "üì° Radar: OFF"
	radarBtn.BackgroundColor3 = radar and Color3.fromRGB(70,180,255) or Color3.fromRGB(60,100,180)
	if RF_Radar then RF_Radar:InvokeServer(radar) end
end)

sellBtn.MouseButton1Click:Connect(function()
	autoSell = not autoSell
	sellBtn.Text = autoSell and "üí∞ Auto Sell: ON" or "üí∞ Auto Sell: OFF"
	sellBtn.BackgroundColor3 = autoSell and Color3.fromRGB(250,220,100) or Color3.fromRGB(240,180,60)
end)

rarityBtn.MouseButton1Click:Connect(function()
	rarityDetect = not rarityDetect
	rarityBtn.Text = rarityDetect and "üåà Rarity Detector: ON" or "üåà Rarity Detector: OFF"
	rarityBtn.BackgroundColor3 = rarityDetect and Color3.fromRGB(150,80,255) or Color3.fromRGB(180,100,255)
	if rarityDetect then checkRarity() end
end)

-- üîÅ Main Loop
task.spawn(function()
	prepareFishing()
	while task.wait(0.1) do
		if autoFish then doFish() end
	end
end)

-- üõ° Anti AFK always ON
local VirtualUser = game:GetService('VirtualUser')
player.Idled:Connect(function()
	VirtualUser:CaptureController()
	VirtualUser:ClickButton2(Vector2.new())
end)

game:GetService("StarterGui"):SetCore("SendNotification", {
	Title = "Anti AFK loaded!",
	Text = "Made by Tuuguu936",
	Button1 = "Okay",
	Duration = 5
})
